
<div class="ui-grid-row">
	<div class="ui-grid-col-2">
		<label i18n="@@schoolYear" for="schoolYear">Annee Scolaire</label>
	</div>
	<div class="ui-grid-col-9">
		<p-autoComplete [(ngModel)]="selectedSchoolYear"
			(onDropdownClick)="schoolYearDropdown.handleDropdownClick($event)"
			[suggestions]="schoolYearDropdown.filteredSchoolYears"
			[dropdown]="true" id="schoolYear"
			(completeMethod)="schoolYearDropdown.filter($event)"
			name="schoolYear" field="year" [size]="30" required
			placeholder="{{SCHOOLYEAR}}" [minLength]="1" #schoolYear="ngModel"></p-autoComplete>
		<div [hidden]="schoolYear.valid || schoolYear.pristine"
			class="alert alert-danger" i18n="@@schoolYearRequired">Annee
			scolaire Requise</div>
	</div>
	<div class="ui-grid-col-1"></div>
</div>
<br />
<div class="ui-grid-row">
	<div class="ui-grid-col-2">
		<label i18n="@@class" for="classe">Classe</label>
	</div>
	<div class="ui-grid-col-9">
		<p-autoComplete [(ngModel)]="selectedClasse"
			(onDropdownClick)="classDropdown.handleDropdownClick($event)"
			[suggestions]="classDropdown.filteredClasses" [dropdown]="true"
			id="classe" (completeMethod)="classDropdown.filter($event)"
			name="classe" field="name" [size]="30" placeholder="{{CLASSE}}"
			[minLength]="1" #classe="ngModel" required></p-autoComplete>
		<div [hidden]="classe.valid || classe.pristine"
			class="alert alert-danger" i18n="@@classRequired">Classe
			Requise</div>
	</div>
	<div class="ui-grid-col-1"></div>
</div>

<br />
<div class="ui-grid-row">
	<div class="ui-grid-col-2">
		<label i18n="@@monthQuater" for="term">Mois/Trimestre</label>
	</div>
	<div class="ui-grid-col-9">
		<p-autoComplete [(ngModel)]="selectedTerm"
			(onDropdownClick)="termDropdown.handleDropdownClick($event)"
			[suggestions]="termDropdown.filteredTerms" [dropdown]="true"
			id="term" (completeMethod)="termDropdown.filter($event)" name="term"
			field="name" [size]="30" placeholder="{{TERM}}" [minLength]="1"
			#term="ngModel" required></p-autoComplete>
		<div [hidden]="term.valid || term.pristine" class="alert alert-danger"
			i18n="@@monthQuaterRequired">Mois/Trimestre Requise</div>
	</div>
	<div class="ui-grid-col-1"></div>
</div>
<br />
<div class="ui-grid-row">
	<div class="ui-grid-col-2"></div>
	<div class="ui-grid-col-4">
		<button type="button" pButton icon="fa fa-calculator"
			[disabled]="disabled" (click)="calculate()" label="{{calc}}"></button>
	</div>
	<div class="ui-grid-col-4">
		<button type="button" pButton icon="fa fa-calculator"
			[disabled]="disabled" (click)="getResults()" label="{{results}}"></button>
	</div>

	<div class="ui-grid-col-4">
		<button type="button" pButton icon="fa fa-mail" [disabled]="disabled"
			(click)="emailResults()" label="{{mailing}}"></button>
	</div>

</div>

<br />

<div>
	<p-dataGrid [value]="termResult.resultSummaries"> <ng-template
		let-resultSummary pTemplate="item">
	<div style="padding: 3px" class="ui-g-12 ui-md-3">
		<p-panel [header]="" [style]="{'text-align':'center'}"> <p-header>
		{{resultSummary.studentFirstName}} {{resultSummary.studentMiddleName}}
		{{resultSummary.studentLastName}} </p-header>
		<div class="car-detail">
			<span i18n="@@rank">Rang:</span> {{resultSummary.rankNbr}}
		</div>
		<div class="car-detail">
			<span i18n="@@mark">Note:</span> {{resultSummary.mark| number :
			'1.2-2' }} - {{resultSummary.gradeName}}
		</div>
		<div class="car-detail">
			<span i18n="@@decision">Decision:</span> {{resultSummary.decision}}
		</div>
		<hr class="ui-widget-content" style="border-top: 0">
		<i class="fa fa-search" (click)="getAverages(resultSummary)"
			style="cursor: pointer"></i> </p-panel>
	</div>
	</ng-template> </p-dataGrid>
</div>
<br />

<p-dialog header="{{DETAIL}}" [(visible)]="displayDialog"
	[responsive]="true" showEffect="fade" [modal]="true" width="950">
<p-dataTable [value]="selectedResultSummary.averages" [paginator]="true"
	[rows]="15" [responsive]="true"> <p-column
	*ngFor="let col of averageCols" [field]="col.field"
	[header]="col.header" [sortable]="col.sortable" [filter]="col.filter">
</p-column> <p-column header="{{TEACHER}}"> <ng-template let-col
	let-bulletin="rowData" let-ri="rowIndex" pTemplate="body">
<span>{{getName(ri)}}</span> </ng-template> </p-column> <p-footer> </p-footer> </p-dataTable> <footer>
	<div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
		<button type="button" pButton icon="fa fa-close" (click)="close()"
			label="{{CLOSE_LABEL}}"></button>
	</div>
</footer> </p-dialog>

<div *ngIf="error" class="alert alert-danger">{{error}}</div>
<div *ngIf="msg" class="alert alert-success">{{msg}}</div>