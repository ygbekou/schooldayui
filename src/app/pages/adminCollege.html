<file-uploader></file-uploader>

<p-dialog header="Details" [(visible)]="displayDialog" [responsive]="true" showEffect="fade" [modal]="true" width="1300">
  <div class="ui-grid ui-grid-responsive ui-fluid" *ngIf="college">
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@name" for="name">Nom</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="name" [(ngModel)]="college.name" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@officialName" for="officialName">Nom officiel</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="officialName" [(ngModel)]="college.officialName" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@nameShort" for="nameShort">Nom court</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="nameShort" [(ngModel)]="college.nameShort" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label for="college">Cycle</label>
      </div>
      <div class="ui-grid-col-9">
        <p-autoComplete [(ngModel)]="college.cycle" (onDropdownClick)="cycleDropdown.handleDropdownClick($event)"
          [suggestions]="cycleDropdown.filteredCycles" [dropdown]="true" id="cycle"
          (completeMethod)="cycleDropdown.filter($event)" name="cycle" field="name" [size]="30" placeholder="Cycle"
          [minLength]="1" #cycle="ngModel"></p-autoComplete>
      </div>
      <div class="ui-grid-col-1"></div>
    </div>
    <div class="ui-grid-row">
			<div class="ui-grid-col-2">
				<label for="ordreAffichageMenuSiteWeb">Ordre d'aff. Menu</label>
			</div>
			<div class="ui-grid-col-10">
				<input type="number" pInputText id="ordreAffichageMenuSiteWeb" 
					[(ngModel)]="college.ordreAffichageMenuSiteWeb" />
			</div>
		</div>
    <div class="ui-grid-row">
			<div class="ui-grid-col-2">
				<label for="ordreAffichageProjetsEtudiant">Ordre d'aff. Projets</label>
			</div>
			<div class="ui-grid-col-10">
				<input type="number" pInputText id="ordreAffichageProjetsEtudiant" 
					[(ngModel)]="college.ordreAffichageProjetsEtudiant" />
			</div>
		</div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@ciblePublic" for="ciblePublic">Public cible</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="ciblePublic" [(ngModel)]="college.ciblePublic" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@duration" for="duree">Durée</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="duree" [(ngModel)]="college.duree" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@credits" for="credit">Crédit</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="credit" [(ngModel)]="college.credit" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@duration" for="nextSchoolyear">Prochaine rentrée</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="nextSchoolyear" [(ngModel)]="college.nextSchoolyear" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@credits" for="session">Session</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="session" [(ngModel)]="college.session" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@prix" for="prix">Prix</label>
      </div>
      <div class="ui-grid-col-10">
        <input pInputText id="prix" [(ngModel)]="college.prix" />
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@pro" for="pro">Systeme scolaire</label>
      </div>
      <div class="ui-grid-col-10">
        <p-selectButton [options]="collegeTypes" [(ngModel)]="college.collegeType"></p-selectButton>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@description" for="description">Description</label>
      </div>
      <div class="ui-grid-col-10">
        <p-editor [(ngModel)]="college.description" [style]="{'height':'400px'}" id="description"></p-editor>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@fees" for="fees">Tarif standard</label>
      </div>
      <div class="ui-grid-col-10">
        <p-editor [(ngModel)]="college.fees" [style]="{'height':'150px'}" id="fees"></p-editor>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@fees" for="fees">Tarif META</label>
      </div>
      <div class="ui-grid-col-10">
        <p-editor [(ngModel)]="college.tarifMeta" [style]="{'height':'50px'}" id="fees_meta"></p-editor>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@fees" for="fees">Tarif E-learning</label>
      </div>
      <div class="ui-grid-col-10">
        <p-editor [(ngModel)]="college.tarifElearning" [style]="{'height':'50px'}" id="fees_elearning"></p-editor>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@admissionConditions" for="description">Conditions d'admission</label>
      </div>
      <div class="ui-grid-col-10">
        <p-editor [(ngModel)]="college.admission" [style]="{'height':'100px'}" id="admission"></p-editor>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@status" for="status">Activé ?</label>
      </div>
      <div class="ui-grid-col-10">
        <p-checkbox [(ngModel)]="college.status" binary="true" id="status"></p-checkbox>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">
        <label i18n="@@status" for="status">Parrainé par META ?</label>
      </div>
      <div class="ui-grid-col-10">
        <p-checkbox [(ngModel)]="college.isMeta" binary="true" id="status"></p-checkbox>
      </div>
    </div>
  </div>

  <div *ngIf="error" class="alert alert-danger">{{error}}</div>

  <footer>
    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
      <button type="button" pButton icon="fa fa-close" (click)="confirmDelete()" label="{{DELETE_LABEL}}"></button>
      <button type="button" pButton icon="fa fa-check" (click)="save()" label="{{SAVE_LABEL}}"></button>
    </div>
  </footer>
</p-dialog>

<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" width="425" [closable]="false"></p-confirmDialog>


<p-dataTable [value]="colleges" selectionMode="single" [(selection)]="selectedCollege" expandableRows="true"
  (onRowSelect)="onRowSelect($event)" [paginator]="true" [rows]="15" [responsive]="true">
  <p-column expander="true" styleClass="col-icon" [style]="{'width':'5%'}"> </p-column>
  <p-column *ngFor="let col of cols" [field]="col.field" [header]="col.header" [sortable]="col.sortable"
    [filter]="col.filter" [style]="col.style">
    <ng-template *ngIf="col.type === 'string' || col.type === undefined" let-col let-data="rowData" pTemplate
      type="body"> <span class="col-string">{{ data[ col.field ] }}</span> </ng-template>
    <ng-template *ngIf="col.type === 'Date'" let-col let-data="rowData" pTemplate type="body"> <span class="col-date">{{
	data[col.field ] | date:'dd/MM/yy' }}</span> </ng-template>
    <ng-template *ngIf="col.type === 'text'" let-col let-data="rowData" pTemplate type="body">
      <div [innerHTML]="data[ col.field ]"></div>
    </ng-template>
  </p-column>
  <p-column field="status" header="Etat" [style]="{'width':'9%'}" [sortable]="true">
    <ng-template let-data="rowData" let-rowIndex="rowIndex" pTemplate type="body">
      <div class="label-main" *ngIf="data.status">
        <label class="label label-success" style="padding: 5px; border-radius: 5px;">Activé</label>
      </div>
      <div class="label-main" *ngIf="!data.status">
        <label class="label label-danger" style="padding: 5px; border-radius: 5px;">Désactivé</label>
      </div>
    </ng-template>
  </p-column>
  <p-column field="id" header="actions" [style]="{'width':'7%'}">
    <ng-template let-data="rowData" let-rowIndex="rowIndex" pTemplate type="body">
      <button type="button" pButton icon="fa fa-picture-o" style="float: left"
        (click)="showDialogToUploadImage(data)"></button>
    </ng-template>
  </p-column>
  <ng-template let-college pTemplate="rowexpansion">
    <div class="ui-grid ui-grid-responsive ui-fluid" style="font-size: 16px; padding: 20px">
      <div class="ui-grid-row">
        <div class="ui-grid-col-2">
          <!-- <img class="thumb" src="assets/images/college/{{college.pic}}" alt="" /> -->
        </div>
      </div>

    </div>
  </ng-template>
  <ng-template pTemplate="paginatorLeft">
    <button type="button" (click)="showDialogToAdd()" pButton icon="fa fa-plus-circle"></button>
  </ng-template>
  <ng-template pTemplate="paginatorRight">
    <button type="button" (click)="getAll()" pButton icon="fa fa-refresh"></button>
  </ng-template>
</p-dataTable>

<!-- Initialize Quill editor -->
<script>
  var quill = new Quill('#editor', {
    theme: 'bubble'
  });

</script>
