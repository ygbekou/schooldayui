<p-dialog header="Demande conge" [(visible)]="displayDialog"
	[responsive]="true" showEffect="fade" [modal]="true" width="700">
<div class="ui-grid ui-grid-responsive ui-fluid" *ngIf="getConge">
	<div>

    <div class="ui-grid-row form-group">
      <div class="ui-grid-col-2">
        <label i18n="@@duree" for="duree">Jour(s) Dem.: </label>
      </div>
      <div class="ui-grid-col-9">
        <input pInputText id="duree" class="form-control"
          [(ngModel)]="getConge.numberOfDay" [disabled]="getConge.closeDescription" />
      </div>
      <div class="ui-grid-col-1"></div>
		</div>
		
			<div class="ui-grid-row form-group">
      <div class="ui-grid-col-2">
        <label i18n="@@numberOfDayEffective" for="numberOfDayEffective">Jours Jouit : </label>
      </div>
      <div class="ui-grid-col-9">
        <input pInputText id="numberOfDayEffective" class="form-control"
          [(ngModel)]="getConge.numberOfDayEffective" [disabled]="getConge.closeDescription"/>
      </div>
      <div class="ui-grid-col-1"></div>
    </div>

		<div class="ui-grid-row form-group">
			<div class="ui-grid-col-2">
				<label i18n="@@debut" for="debut">Début : </label>
			</div>
			<div class="ui-grid-col-9">
					<p-calendar monthNavigator="true" yearRange="1940:2050" yearNavigator="true" id="debut" name="debut"
						[(ngModel)]="getConge.startDate" #debut="ngModel"
						placeholder="dd/mm/yyyy" required [disabled]="getConge.closeDescription"></p-calendar>
				</div>
			<div class="ui-grid-col-1"></div>
		</div>
		<div class="ui-grid-row form-group">
			<div class="ui-grid-col-2">
				<label i18n="@@name" for="name">Fin : </label>
			</div>
			<div class="ui-grid-col-9">
					<p-calendar monthNavigator="true" yearRange="1940:2050" yearNavigator="true" id="fin" name="fin"
						[(ngModel)]="getConge.endDate" #fin="ngModel"
						placeholder="dd/mm/yyyy" required [disabled]="getConge.closeDescription"></p-calendar>
				</div>
			<div class="ui-grid-col-1"></div>
		</div>
		<div class="ui-grid-row form-group">
      <div class="ui-grid-col-2">
        <label i18n="@@commentaire" for="commentaire">Commentaire : </label>
      </div>
      <div class="ui-grid-col-9">
        <input pInputText id="commentaire" class="form-control"
          [(ngModel)]="getConge.commentaire" />
      </div>
      <div class="ui-grid-col-1"></div>
		</div>
	</div>
</div>


<div *ngIf="error" class="alert alert-danger">{{error}}</div>
<footer>
	<div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
		<!-- <button type="button" pButton icon="fa fa-close" (click)="delete()"
			label="{{DELETE_LABEL}}"></button> -->
		<button type="button" pButton icon="fa fa-check" (click)="saveEmployeeGetConge()"
			label="{{SAVE_LABEL}}"></button>
	</div>
</footer> </p-dialog>


<p-dataTable [value]="getConges" selectionMode="single"
	[(selection)]="selectedConge" expandableRows="true"
	[paginator]="true" [rows]="5"
	(onRowSelect)="onRowSelect($event)"
	[responsive]="true" (onRowExpand)="getCongeRow($event)">
	<p-column expander="true" styleClass="col-icon" [style]="{'width':'5%'}">

	</p-column>
	<p-column *ngFor="let col of cols" [field]="col.field" [header]="col.header"
	[sortable]="col.sortable" [style]="col.style" [filter]="col.filter">
		<ng-template *ngIf="col.type === 'Date'" let-col let-data="rowData" pTemplate type="body">
			<span class="col-date">{{ data[ col.field ] | date:'dd/MM/yy' }}</span>
		</ng-template>
	</p-column>
	<p-column field="status" header="Etat" sortable=true filter=true [style]="{'width':'20%'}">
		<ng-template let-data="rowData" let-rowIndex="rowIndex" pTemplate type="body">
		  <div  *ngIf="data.status==1">
			<label class="label label-success" style="padding: 5px; border-radius: 5px;">Accepté</label>
			<!-- <button pButton pRipple type="button" label="Accepté" class="p-button-rounded p-button-success"></button> -->
		  </div>
		  <div  *ngIf="data.status==0">
			<label class="label label-primary" style="padding: 5px; border-radius: 5px;">Demandé</label>
			<!-- <button pButton pRipple type="button" label="Demandé" class="p-button-rounded"></button> -->
			</div>
			<div  *ngIf="data.status==2">
			<label class="label label-danger" style="padding: 5px; border-radius: 5px;">Refusé</label>
			<!-- <button pButton pRipple type="button" label="Refusé" class="p-button-rounded p-button-danger"></button> -->
		  </div>
		</ng-template>
	</p-column>

	<ng-template let-getConge pTemplate="rowexpansion">
		<div class="ui-grid-row">
			<div class="ui-grid-col-2">
				 <button type="button" (click)="accepte()" [disabled]="getConge.closeDescription">Accepté</button>
			</div>
			<div class="ui-grid-col-2">
				<button type="button" (click)="refuse()" [disabled]="getConge.closeDescription">Refusé</button>
			</div>
				<div class="ui-grid-col-2">
				<button type="button" (click)="close()" [disabled]="getConge.closeDescription">Cloturé</button>
			</div>
			 
		</div>
   
  </ng-template>

  <ng-template pTemplate="paginatorLeft">
    <button type="button" (click)="showDialogToAdd()" pButton icon="fa fa-plus-circle"></button>
  </ng-template>
  <ng-template pTemplate="paginatorRight">
    <button type="button" (click)="getEmployeeAllConge()" pButton icon="fa fa-refresh"></button>
	</ng-template>
	
	
</p-dataTable>
